<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" type="image/png" href="/images/cabin.png"><link href="/styles/main.css" rel="stylesheet"><title>My Blog</title></head><body><ul class="nav group"><li class="icon-menu menu"></li><li class="nav-link red active"><a href="/" class="name">My Name</a></li><li class="nav-link blue"><a href="/about.html">about</a></li><li class="nav-link orange"><a href="/projects.html">projects</a></li><li class="nav-link green"><a href="/archives.html">archives</a></li></ul><div class="content"><div class="post"><div class="post-head group"><a href="/posts/functional-javascript-in-action.html"><h1 class="post-title">Functional JavaScript in action</h1></a><h2 class="post-date">Published&nbsp<abbr title="2013-11-17T00:00:00.000Z" class="timeago"></abbr></h2></div><div class="post-body markdown"><p>Recently came across a <a href="http://redactweb.com/javascript-to-convert-between-states-and-abbreviations/">blog post</a> about a JavaScript function to state names to abbreviations (or vice versa) and realized that it&#39;s an excellent topic to present the power that can be had from functional programming in JavaScript.</p>
<p>The premise of the article is that the author needed a function that when given a state name or abbreviation would return the opposite. The author went about it by first finding a PHP function that does the same, then simply converted the code over to JavaScript. While this method surely works for the purpose needed, it also illustrates how powerful functional programming techniques could be used instead which will produce the same result, but also have some reusable code.</p>
<p>First, let&#39;s rewrite the function to get rid of the looping pattern. To do this in a more functional way we can break down what is happening into a few steps. The function is provided two arguments: <code>name</code> and <code>to</code>. Name is the value that we are looking up in our array and to is the key that we want to convert to. Given that, in order to find the value we need to know the name of the key of that value. It&#39;s the opposite of <code>to</code>, right? Using the power of Underscore/Lodash -- I prefer <a href="http://lodash.com/docs">Lo-Dash</a> -- this can be done using the <code>_.without</code> function. Now, keep in mind that for performance it would probably be better to find the from value using a ternary expression, but for the sake of the article we want to do it in a functional way. So that makes our first expression:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">without</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;abbrev&#39;</span><span class="p">],</span> <span class="nx">to</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</pre></div>
</code></pre>
<p>What this does is simply take the array, find the value that matches <code>to</code> and remove it, leaving only one string which is our <code>from</code> key.</p>
<p>Now that we know what our <code>from</code> key is, we need to look up the <code>name</code> in our states array. But before we do that let&#39;s see how the original blog post is doing the lookup:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">states</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">to</span> <span class="o">==</span> <span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">abbrev</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()){</span>
      <span class="nx">returnthis</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">to</span> <span class="o">==</span> <span class="s1">&#39;abbrev&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()){</span>
      <span class="nx">returnthis</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">abbrev</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</code></pre>
</div><div class="comments"><a href="/posts/functional-javascript-in-action.html#comments"><span class="icon-bubbles"></span>Comments</a></div></div><div class="post"><div class="post-head group"><a href="/posts/blok-theme.html"><h1 class="post-title">Blok Theme</h1></a><h2 class="post-date">Published&nbsp<abbr title="2013-10-02T04:00:00.000Z" class="timeago"></abbr></h2></div><div class="post-body markdown"><p>Blok is a blogging theme for <a href="http://cabinjs.com">Cabin</a>.</p>
<p>The theme&#39;s source code is located at the <a href="https://github.com/CabinJS/Blok">Blok GitHub repository</a>.</p>
<h2><a name="installation" class="anchor" href="#installation"><span class="header-link"></span></a>Installation</h2>
<p>To use Blok you must have <a href="http://nodejs.org/">Node.js</a>, <a href="http://www.python.org/">Python</a> (for <a href="http://pygments.org/">Pygments</a>), and <a href="http://compass-style.org/">Compass</a> installed.</p>
<p>First install Cabin and Grunt globally with this command:</p>
<pre><code class="lang-bash"><div class="highlight"><pre>npm install -g cabin grunt-cli
</pre></div>
</code></pre>
<p>Then scaffold a static site generator using the Blok theme with this command:</p>
<pre><code class="lang-bash"><div class="highlight"><pre>cabin new blog CabinJS/Blok
</pre></div>
</code></pre>
<p>Now change into the <code>blog</code> directory and run the <code>grunt</code> command:</p>
<pre><code class="lang-bash"><div class="highlight"><pre><span class="nb">cd </span>blog <span class="o">&amp;&amp;</span> grunt
</pre></div>
</code></pre>
<p>This will build your site, start a static file server, open a browser tab with the site&#39;s homepage, and start a watch process to rebuild your site when source files change.</p>
<p>Try editing a markdown file in the <code>posts</code> folder or CSS in the <code>src/styles</code> folder and upon saving, your site will automatically be rebuilt with the updated content/styles. When you edit markdown, your browser will automatically refresh to view new content, and when editing styles, they will be injected directly into the page for an immediate update.</p>
<p><strong>Note: In the future, you can build your site by running the <code>grunt</code> command in the <code>blog</code> folder.</strong></p>
<h2><a name="user-guide" class="anchor" href="#user-guide"><span class="header-link"></span></a>User Guide</h2>
<h3><a name="expected-files-to-edit" class="anchor" href="#expected-files-to-edit"><span class="header-link"></span></a>Expected files to edit</h3>
<p>There are parts of the Blok theme which you are expected to edit when building your site. Here they are:</p>
<h4><a name="layouts" class="anchor" href="#layouts"><span class="header-link"></span></a>Layouts</h4>
<p>You are expected to add your name to the nav home link in the <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/base.jade#L16"><code>src/layouts/base.jade</code></a> or <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/_header.ejs#L22"><code>src/layouts/_header.ejs</code></a> file. </p>
<p>To get <a href="http://disqus.com/">Disqus</a> setup, you must add your Disqus username to the <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/_social.jade#L37"><code>src/layouts/_social.jade</code></a> or <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/_social.ejs#L42"><code>src/layouts/_social.ejs</code></a> file. There are also placeholder comments for Google Analytics scripts in the <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/base.jade#L45"><code>src/layouts/base.jade</code></a> and <a href="https://github.com/CabinJS/Blok/blob/master/src/layouts/_footer.ejs#L10"><code>src/layouts/_footer.ejs</code></a> files.</p>
<h4><a name="pages" class="anchor" href="#pages"><span class="header-link"></span></a>Pages</h4>
<p>You are expected to edit the <code>src/pages/about.(jade/ejs)</code> and <code>src/pages/projects.(jade/ejs)</code> pages to describe yourself and your projects.</p>
<h4><a name="posts" class="anchor" href="#posts"><span class="header-link"></span></a>Posts</h4>
<p>You are expected to edit the default posts and add your own metadata and content.</p>
<h3><a name="authoring-posts" class="anchor" href="#authoring-posts"><span class="header-link"></span></a>Authoring Posts</h3>
<p>Blok generates pages using markdown posts in the <code>posts</code> folder. It expects markdown posts to contain two required metadata properties:</p>
<h4><a name="title" class="anchor" href="#title"><span class="header-link"></span></a>title</h4>
<p>Type: <code>String</code></p>
<p>Title of the post which is also used as its url.</p>
<h4><a name="date" class="anchor" href="#date"><span class="header-link"></span></a>date</h4>
<p>Type: <code>String</code></p>
<p>DateString which is parsed and displayed as the publishing date of the post.</p>
<p>To learn more about post metadata, check out <a href="https://github.com/CabinJS/grunt-pages#authoring-posts">grunt-pages</a>.</p>
<h3><a name="deploying-your-site" class="anchor" href="#deploying-your-site"><span class="header-link"></span></a>Deploying your Site</h3>
<p>If you selected a deployment tool during the installation process, you can deploy your site with the <code>grunt deploy</code> command.</p>
<p><strong>Note: for Amazon S3 and FTP deployment, read the Gruntfile.js comment about how to configure your credentials.</strong></p>
<p>If you didn&#39;t select a deployment tool during the theme installation, you can add one later by following the <a href="https://github.com/CabinJS/Cabin/wiki/Deployment-Tools">installation guide</a> in the wiki.</p>
<h4><a name="deploying-to-a-subdirectory" class="anchor" href="#deploying-to-a-subdirectory"><span class="header-link"></span></a>Deploying to a subdirectory</h4>
<p>If you are not deploying to the root of your site, you will need to modify the grunt-pages <code>data.baseUrl</code> property during deployment so that the asset paths and URLs resolve correctly. Here is an example which augments the <code>build</code> and <code>deploy</code> tasks when deploying a site to <code>/blog/</code>:</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">target</span> <span class="o">===</span> <span class="s1">&#39;deploy&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">grunt</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">&#39;pages.posts.options.data.baseUrl&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">([</span>
    <span class="s1">&#39;clean&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pages&#39;</span><span class="p">,</span>
    <span class="s1">&#39;compass&#39;</span><span class="p">,</span>
    <span class="s1">&#39;copy&#39;</span>
  <span class="p">]);</span>
<span class="p">});</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;deploy&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build:deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;yourChosenDeployTask&#39;</span><span class="p">]);</span>
</pre></div>
</code></pre>
<h3><a name="included-librariestools" class="anchor" href="#included-librariestools"><span class="header-link"></span></a>Included libraries/tools</h3>
<h4><a name="normalize-css" class="anchor" href="#normalize-css"><span class="header-link"></span></a>normalize.css</h4>
<p><a href="https://github.com/CabinJS/Blok/blob/master/src/styles/_normalize.scss">Normalize.css</a> is used to normalize styles across browsers.</p>
<h4><a name="jquery" class="anchor" href="#jquery"><span class="header-link"></span></a>jQuery</h4>
<p>jQuery is used to toggle the touch optimized menu in <a href="https://github.com/CabinJS/Blok/blob/master/src/scripts/main.js"><code>src/scripts/main.js</code></a>.</p>
<h4><a name="icomoon" class="anchor" href="#icomoon"><span class="header-link"></span></a>IcoMoon</h4>
<p>Blok uses the <a href="http://icomoon.io/app/">IcoMoon App</a> to generate icon fonts. To alter the icons, go to <a href="http://icomoon.io/app/">this</a> url, and click <code>Import Icons</code> in the top left and upload the <code>src/styles/selection.json</code> file.</p>
<p>After updating the icons simply download them and replace the <code>fonts</code> folder inside the <code>src/styles</code> folder, replace the <code>src/styles/selection.json</code> with the new <code>selection.json</code> and replace the contents of <code>src/styles/_icon.scss</code> with <code>style.css</code>.</p>
<h2><a name="rss" class="anchor" href="#rss"><span class="header-link"></span></a>RSS</h2>
<p>If you would like to generate an RSS feed, check out grunt-pages&#39; <a href="https://github.com/CabinJS/grunt-pages#rss">RSS option</a> and add it to your grunt-pages config in Gruntfile.js.</p>
<h2><a name="markdown" class="anchor" href="#markdown"><span class="header-link"></span></a>Markdown</h2>
<p>Cabin supports <a href="https://help.github.com/articles/github-flavored-markdown">GitHub flavored Markdown</a> for its static site generation. It has awesome features like:</p>
<h3><a name="syntax-highlighted-code-blocks" class="anchor" href="#syntax-highlighted-code-blocks"><span class="header-link"></span></a>Syntax highlighted code blocks</h3>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">praise</span> <span class="p">(</span><span class="nx">thing</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">thing</span> <span class="o">+</span> <span class="s1">&#39; is so great!&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">praise</span><span class="p">(</span><span class="s1">&#39;Blok&#39;</span><span class="p">);</span>
</pre></div>
</code></pre>
<h3><a name="linked-headerslink-on-the-left" class="anchor" href="#linked-headerslink-on-the-left"><span class="header-link"></span></a>Linked headers(link on the left)</h3>
<p>Link into specific sections of your posts.</p>
</div><div class="comments"><a href="/posts/blok-theme.html#comments"><span class="icon-bubbles"></span>Comments</a></div></div><div class="pagination group"><a href="/page/1/" class="older">&#8592; Older</a></div></div><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.1.0/jquery.timeago.min.js" type="text/javascript"></script><script src="/scripts/main.js" type="text/javascript"></script><script>// Add your analytics code here</script></body></html>