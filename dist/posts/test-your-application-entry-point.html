<!DOCTYPE html>
<html>
<head>
  <base href="..">
    <meta charset="utf-8">
      <title>Test Your Application Entry Point | Matthew Phillips</title>

    <meta name="author" content="Matthew Phillips">
    <meta name="date" content="2014-03-25">

    <link rel="stylesheet" href="styles//normalize.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Code+Pro:300,600">
    <link rel="stylesheet" href="styles/screen.css">
    <link rel="stylesheet" href="styles/github.css">
</head>
<body>
  <section class="content">
    <header>
      <h1 id="gistid"><a href="https://gist.github.com/78f0fb4a812b7422ef04">gist #78f0fb4a812b7422ef04</a></h1>
      <h2 id="description" class="instapaper_title entry-title">
        <span id="prompt"><span class="host">matthew@local</span><span>:</span><span class="tilde">~</span><span class="dollar">$<?span></span>
        <span> echo 'Test Your Application Entry Point'</span>
      </h2>
    </header>

    <div id="gistbody" class="instapaper_body entry-content">
      <article>
        <p>This will be short and sweet. When working on a large JavaScript application (or a small one, for that matter) you&#39;re going to have an entry point where you set up your world and get everything started. It probably looks something like this:</p>
<pre><code class="hljs javascript">define([
  <span class="hljs-string">'xwidget'</span>,
  <span class="hljs-string">'ywidget'</span>,
  <span class="hljs-string">'routing'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">XWidget, YWidget, route</span>)</span>{
  <span class="hljs-comment">// Load everything!</span>

  <span class="hljs-comment">// Set up global state!</span>
  <span class="hljs-keyword">var</span> state = {
    light: <span class="hljs-string">'green'</span>,
    time: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()
  };

  <span class="hljs-comment">// Initialize main widget!</span>
  <span class="hljs-keyword">var</span> main = <span class="hljs-keyword">new</span> XWidget(<span class="hljs-string">'body'</span>, {
    subwidget: <span class="hljs-keyword">new</span> YWidget($(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>), {}),
    state: state
  });

  <span class="hljs-comment">// Listen for routes</span>
  route(<span class="hljs-string">'/calendar'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// Make some change to `main` probably</span>
  });
});
</code></pre>
<p>It&#39;s very easy to forget that not only is this an important chunk of code, it influences everything else that happens further down the chain in your application. <strong>Test it</strong> as though it&#39;s just as important, because it is.</p>
<p>When you begin crafting your application as a pyramid of <a href="http://dailyjs.com/2014/03/10/components-controls/">web components</a> this becomes even more critical. Using <a href="http://canjs.com/guides/Components.html">can.Component</a>&#39;s scoping rules, data you initialize in your <code>main.js</code> will trickle down and be used by any component on your page, no matter how deeply nested.</p>
<p>This is amazing in terms of crafting components that glue well together, but the downside is that the tests you created for <code>&lt;x-widget&gt;</code> are not enough, that top level file might be doing things just slightly differently.</p>
<p>The benefits of writing tests first hold as well for your application entry point. If you try writing tests after-the-fact (as I&#39;m currently doing) you&#39;ll notice that things break as your entry point file is actually dependent on something in your <code>index.html</code> file (as an example). Tests first will force you to make sure everything is as maximally modular as can be.</p>


      </article>
    </div>
    <footer style="display: block">
      <p>Matthew Phillips</p>
    </footer>
  </section>
</body>
</html>
