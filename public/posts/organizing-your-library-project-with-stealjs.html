	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.15" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Organizing your library project with StealJS &middot; Matthew Phillips </title>

  
  <link rel="stylesheet" href="https://matthewphillips.info/css/poole.css">
  <link rel="stylesheet" href="https://matthewphillips.info/css/syntax.css">
  <link rel="stylesheet" href="https://matthewphillips.info/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Matthew Phillips" />
</head>

	<body class="">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://matthewphillips.info/"><h1>Matthew Phillips</h1></a>
      <p class="lead">
       Home on the World Wide Web 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
    </ul>

    <p>&copy; 2016. All rights reserved. </p>
  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1>Organizing your library project with StealJS</h1>
			  <span class="post-date">Tue, Mar 31, 2015</span>
			      

<p>With <a href="http://stealjs.com/">StealJS</a> you can easily set up an open-source library that fits with the way you like to organize your code. A common directory structure might look like this:</p>

<pre><code>- src
  - main.js
  - dep.js
- test
  - test.html
  - test.js
package.json
Gruntfile.js
</code></pre>

<p>In order to keep a shallow folder structure we&rsquo;ve divided the library&rsquo;s source code in <code>src</code> and its tests in <code>test</code>. The root directory only contains our <code>package.json</code> and a <code>Gruntfile.js</code> for builds.</p>

<p>With this structure you might try to install your module with NPM:</p>

<pre><code class="language-shell">npm install my-module --save
</code></pre>

<p>And then load it in your project:</p>

<pre><code class="language-js">import myModule from &quot;my-module&quot;;
</code></pre>

<p>However this will fail because your <code>main</code> is not pointing to right place. Imagine your <code>main.js</code> look like:</p>

<pre><code class="language-js">import dep from &quot;my-module/dep&quot;;
</code></pre>

<p>Steal will look for <code>dep.js</code> in the project&rsquo;s root folder. To set an alternative root, correctly called the lib folder, set it in the <code>package.json</code>:</p>

<pre><code class="language-json">{
  &quot;name&quot;: &quot;my-module&quot;,
  &quot;main&quot;: &quot;dist/cjs/main.js&quot;,
  &quot;system&quot;: {
    &quot;main&quot;: &quot;main&quot;,
    &quot;directories&quot;: {
      &quot;lib&quot;: &quot;src&quot;
    }
  }
}
</code></pre>

<p>This tells Steal that your library&rsquo;s code is nested under the <code>src</code> folder. This makes it easy to refer to your module by name in its internal code. With your test do the same thing:</p>

<pre><code class="language-js">import myModuleDep from &quot;my-module/dep&quot;;
</code></pre>

<p>Will correctly load <code>src/dep.js</code> if that&rsquo;s the module you want to test.</p>

<h2 id="building:54829a1cb3a64537a249d84efe4fc1a9">Building</h2>

<p>If you&rsquo;re only target Steal you can go ahead and publish your module on NPM. But if you want to reach users of other module loaders you should set up a build script. <a href="http://stealjs.com/docs/steal-tools.html">steal-tools</a> makes this easy. For example if using Grunt:</p>

<pre><code class="language-js">grunt.initConfig({
  &quot;steal-export&quot;: {
    dist: {
      system: {
        config: &quot;package.json!npm&quot;
      },
      outputs: {
        &quot;+cjs&quot;: {},
        &quot;+amd&quot;: {},
        &quot;global-js&quot;: {]
      }
    }
  }
});
</code></pre>

<p>Then by simply running <code>grunt steal-export</code> will produce <code>dist/cjs</code>, <code>dist/amd</code>, and <code>dist/global</code> folders containing code that will run in RequireJS, Browserify, and as a browser global. Read <a href="http://stealjs.com/docs/StealJS.project-exporting.html">the full guide</a> on setting up an export for your project for more.</p>

<p>See <a href="https://github.com/bitovi-components/bit-tabs">bit-tabs</a> for a full example of this directory structure in action.</p>

			</div>

			
		</div>

  </body>
</html>
